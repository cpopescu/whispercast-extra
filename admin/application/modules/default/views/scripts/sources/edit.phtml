<tal:block phptal:tales="php">
<div id="default-sources-edit-container">
  <div id="default-sources-edit-form-dialog" style="position:absolute; visibility:hidden">
    <div class="hd" id="default-sources-edit-form-dialog-title"></div>
    <div class="bd" id="default-sources-edit-form-dialog-body">
      <tal:block tal:condition="model.form.getElement('name').setLabel(_('Name'))"/>
      <tal:block tal:condition="model.form.getElement('description').setLabel(_('Description'))"/>
      <tal:block tal:condition="model.form.getElement('tags').setLabel(_('Tags'))"/>
      <tal:block tal:condition="model.form.getElement('category_id').setLabel(_('Category'))"/>
      <tal:block tal:condition="model.form.getElement('public').setLabel(_('Public'))"/>
      <tal:block tal:condition="model.form.getElement('usable').setLabel(_('Can be used'))"/>
      <tal:block tal:condition="model.form.getElement('protocol').setLabel(_('Protocol'))"/>
      <tal:block tal:condition="model.form.getElement('source').setLabel(_('Source name'))"/>
      <tal:block tal:condition="model.form.getElement('saved').setLabel(_('Save'))"/>
      <tal:block tal:condition="model.form.getElement('password').setLabel(_('Password'))"/>
      <tal:block tal:condition="model.form.removeElement('submit')"/>
      <tal:block tal:content="structure model.form.render()"/>
      <div id="default-sources-edit-form-errors" class="error"></div>
    </div>
  </div>
</div>

<script type="text/javascript">
sandbox.server = ${structure json_encode(server)};
sandbox.record = ${structure json_encode(model.record)};
</script>

<tal:block metal:use-macro="../../../default/views/scripts/index/library.phtml/Default_Index_Edit"/>

<script type="text/javascript">
<!--
sandbox.run = function() {
  Whispercast.Lib.Default.Index.Edit.run(sandbox, {
    containerId: 'default-sources-edit-container',
    formId: 'default-sources-edit-form',
    formTitle: {
      add: _('Add source...'),
      update: _('Edit source...')
    },
    resource: {
      module: 'default',
      resource: 'streams'
    }
  });
};
sandbox.destroy = function() {
  Whispercast.Lib.Default.Index.Edit.destroy(sandbox, {
    containerId: 'default-sources-edit-container'
  });
};
//-->
</script>
</tal:block>
